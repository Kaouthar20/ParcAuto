{# {% extends 'base.html.twig' %}

{% block title %}Hello FacturationController!
{% endblock %}
{% block stylesheets %}
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>

	<title>Dashboard - Analytics | Sneat - Bootstrap 5 HTML Admin Template - Pro</title>

	<meta
	name="description" content=""/>

	<!-- Favicon -->
	<link
	rel="icon" type="image/x-icon" href="../assets/img/favicon/favicon.ico"/>

	<!-- Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com"/>
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
	<link
	href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet"/>

	<!-- Icons. Uncomment required icon fonts -->
	<link
	rel="stylesheet" href="../assets/vendor/fonts/boxicons.css"/>

	<!-- Core CSS -->
	<link rel="stylesheet" href="../assets/vendor/css/core.css" class="template-customizer-core-css"/>
	<link rel="stylesheet" href="../assets/vendor/css/theme-default.css" class="template-customizer-theme-css"/>
	<link
	rel="stylesheet" href="../assets/css/demo.css"/>

	<!-- Vendors CSS -->
	<link rel="stylesheet" href="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css"/>

	<link rel="stylesheet" href="../assets/vendor/libs/apex-charts/apex-charts.css"/><!-- Page CSS -->

	<!-- Helpers --><script src="../assets/vendor/js/helpers.js"> </script>
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css">


{% endblock %}
{% block body %}


	<body>
		{{ parent() }}


		<table class="table" id="table_id">
			<thead>
				<tr>
					<th>id
					</th>
					<th>date de mission
					</th>

					<th>id_facture</th>
					<th>prestation</th>
					<th>VILLE</th>
					<th>TARIF</th>

					<th>
						Imprimer
					</th>


				</tr>
			</thead>
			<tbody>
				<tr>

					<td>id</td>
					<td>date de mission</td>

					<td>id_facture</td>


					<td>Prestation</td>
					<td>ville</td>
					<td>tarif</td>


					<td>

						<a href="{{path('facturerPdf1')}}" class="btn btn-primary">Imprimer</a>


					</td>

				</tr>
			</tbody>
		</table>

		<!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
		<!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->


	</body>


{% endblock %} #}
{% extends 'base.html.twig' %}

{% block title %}Hello MissionController!

{% endblock %}

{% block body %}
	<style>
		.example-wrapper {
			margin: 1em auto;
			max-width: 800px;
			width: 95%;
			font: 18px / 1.5 sans-serif;
		}
		.example-wrapper code {
			background: #F5F5F5;
			padding: 2px 6px;
		}
		.btn-buy-now {}
		body {
			height: 100vh;
		}
		td {
			padding: 0 !important;
			text-align: center;
		}
		.menu-nav {

			display: flex;
			justify-content: space-between;
		}

		.menu-item {
			color: #FCC;
			padding: 3px;
		}

		.three-dots:after {
			cursor: pointer;
			color: #444;
			content: '\2807';
			font-size: 20px;
			padding: 0 5px;
		}

		a {
			text-decoration: none;
			color: white;
		}

		a div {
			padding: 2px;
		}

		.dropdown {
			position: absolute;
			right: 10px;
			background-color: #66D;

			outline: none;
			opacity: 0;
			z-index: -1;
			max-height: 0;
			transition: opacity 0.1s, z-index 0.1s,
			max-height: 5s;
		}

		.dropdown-container:focus {
			outline: none;
		}

		.dropdown-container:focus .dropdown {
			opacity: 1;
			z-index: 100;
			max-height: 100vh;
			transition: opacity 0.2s, z-index 0.2s,
			max-height: 0.2s;
		}
		.tooltip {
			position: relative;
			display: inline-block;
			border-bottom: 1px dotted black;
		}

		.tooltip .tooltiptext {
			visibility: hidden;
			width: 120px;
			background-color: black;
			color: #fff;
			text-align: center;
			border-radius: 6px;
			padding: 5px 0;

			/* Position the tooltip */
			position: absolute;
			z-index: 1;
		}

		.tooltip:hover .tooltiptext {
			visibility: visible;
		}
		i {
			cursor: pointer;
		}

		.tabMission {
			padding: 10px 25px 0;
			/* height: 100vh; */
		}
		input[type=search] {

			margin-bottom: 15px;
		}
		.swal2-backdrop-show {
			z-index: 99999;
		}
	</style>
	<!DOCTYPE html>

	<!-- =========================================================
																																																																																																																																																																																																				* Sneat - Bootstrap 5 HTML Admin Template - Pro | v1.0.0
																																																																																																																																																																																																				==============================================================
																																																																																																																																																																																																				
																																																																																																																																																																																																				* Product Page: https://themeselection.com/products/sneat-bootstrap-html-admin-template/
																																																																																																																																																																																																				* Created by: ThemeSelection
																																																																																																																																																																																																				* License: You must have a valid license purchased in order to legally use the theme for your project.
																																																																																																																																																																																																				* Copyright ThemeSelection (https://themeselection.com)
																																																																																																																																																																																																				
																																																																																																																																																																																																				=========================================================
																																																																																																																																																																																																				 -->
	<!-- beautify ignore:start -->
		<html lang="en" class="light-style layout-menu-fixed" dir="ltr" data-theme="theme-default" data-assets-path="../assets/" data-template="vertical-menu-template-free"> <head>
			<meta charset="utf-8"/>
			<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>

			<title>Dashboard - Analytics | Sneat - Bootstrap 5 HTML Admin Template - Pro</title>

			<meta
			name="description" content=""/>

			<!-- Favicon -->
			<link
			rel="icon" type="image/x-icon" href="../assets/img/favicon/favicon.ico"/>

			<!-- Fonts -->
			<link rel="preconnect" href="https://fonts.googleapis.com"/>
			<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
			<link
			href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet"/>

			<!-- Icons. Uncomment required icon fonts -->
			<link
			rel="stylesheet" href="../assets/vendor/fonts/boxicons.css"/>

			<!-- Core CSS -->
			<link rel="stylesheet" href="../assets/vendor/css/core.css" class="template-customizer-core-css"/>
			<link rel="stylesheet" href="../assets/vendor/css/theme-default.css" class="template-customizer-theme-css"/>
			<link
			rel="stylesheet" href="../assets/css/demo.css"/>

			<!-- Vendors CSS -->
			<link rel="stylesheet" href="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css"/>

			<link rel="stylesheet" href="../assets/vendor/libs/apex-charts/apex-charts.css"/><!-- Page CSS -->

			<!-- Helpers --><script src="../assets/vendor/js/helpers.js"> </script>

			<!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
			<!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
			<script src="../assets/js/config.js"></script>
			<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css">

			<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.js"></script>
		</head>

		<body>
			<!-- Layout wrapper -->
			<div class="layout-wrapper layout-content-navbar">
				<div
					class="layout-container">
					<!-- Menu -->
					{{ parent() }}

					<!-- / Menu -->

					<!-- Layout container -->
						<div class="layout-page"> <!-- Navbar -->


						<!-- / Navbar -->

						<!-- Content wrapper -->
							<div
							class="content-wrapper"> <!-- Content -->

							<div class=" flex-grow-1 tabMission ">
								<div class="row"></ul>
							</div>
						</h5>

						<div class="card">
							<h5 class="card-header">Liste des factures
							</h5>


							<div
								class="row">
								<!-- Contextual Classes -->


								<h5 class="card-header">
									<div style="margin-left: 260px;
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																		    font-size: 15px;
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																		    width: 340px;" class="form-check form-check-inline">
										<label for="Site" class="form-label">Site:
										</label>

										<select id="site" class="select2 form-select js-example-basic-single">
											<option value="">Select</option>
											{% for site in sites %}

												<option value="{{site.abreviation}}">{{site.description}}</option>
											{% endfor %}

										</select>

									</div>
									<div style="font-size: 15px;" class="form-check form-check-inline mt-3">
										<label for="state" class="form-label">Date depart :
										</label>
										<input class="form-control" type="date" value="2021-06-18T12:30:00" id="dateDepart"/>
									</div>
									<div style="font-size: 15px;" class="form-check form-check-inline">
										<label for="state" class="form-label">Date fin :
										</label>
										<input class="form-control" type="date" value="" id="dateFin"/>
									</div>

									<div style="font-size: 15px;" class="form-check form-check-inline">
										<a target='_blank' href="{{path('facturationTotal')}}" class="btn btn-outline-success">


											<span class="tf-icons bx bx-book-open"></span>&nbsp; Facturer tous
										</a>
									</div>
									<div style="font-size: 15px;" class="form-check form-check-inline">


										<a target='_blank' href="{{path('facturationDetail')}}" class="btn btn-outline-success">


											<span class="tf-icons bx bx-book-open"></span>&nbsp; Detail
										</a>


									</div>

								</h5>


								<!--/ Contextual Classes -->
							</div>


							{# {% set role = app.session.get('ROLES') %} #}
							{# {{ include('facturation/filterFacuration.html.twig') }} #}


							<hr class="my-0"/>
							<div class="card-body">


								<table class="table" id="table_id">
									<thead>
										<tr>
											<th>#</th>
											<th>ORD</th>
											<th>site</th>
											<th>DATE MISSION</th>
											<th>ID FACTURE</th>
											<th>CODE MISSION</th>
											<th>VILLE</th>
											<th>TARIF</th>
											<th>Imprimer</th>


										</tr>
									</thead>
									<tbody id="listFactures">
										{% for index  , facture in factures %}
											{# {% for site in sites %} #}

											<tr>

												<td><input type="checkbox" class="form-check-input  check_facture"></td>

												<td>{{ index +1 }}</td>

												{% for site in allSites %}
													{% if site["id"] == facture.mission.iddossier %}
														{# <td>{{site["nom_dossier"]}}</td> #}
														<td>{{site["abreviation"]}}</td>


													{% endif %}
												{% endfor %}

												<td>{{facture.mission.dateMission | date('Y-m-d') }}</td>

												<td>{{ facture.id }}</td>
												<td>{{facture.mission.codeMission}}</td>
												<td>{{facture.mission.villeMission}}</td>
												<td>{{facture.mtTotal}}</td>

												<td>
													<a target='_blank' href="{{path('facturerPdf1' , {id: facture.id})}}" class="btn btn-sm btn-primary">Imprimer</a>

												</td>

											</tr>
											{# {% endfor %} #}
										{% endfor %}
									</tbody>
								</tbody>
							</table>

							<!-- /Account -->
						</div>

						{# <div class="table-responsive text-nowrap"> #}


					</div>
					<!--/ Contextual Classes -->


				</div>


			</div>
			<!-- Content wrapper -->
		</body>
	</html>
</div>
<!-- / Layout page --></body></html></div><!-- Overlay --><div class="layout-overlay layout-menu-toggle"></div></div><!-- / Layout wrapper --><!-- <div class="buy-now">
																																																																																																																																																																																																				     
																																																																																																																																																																																																				
																																																																																																																																																																																																		
																																																																																																																																																																																																			</div>
																																																																																																																																																																																																		</div></div><!-- Core JS --><!-- Modaal --><!-- Modal --></div></div></div><!-- END --><link href="//cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css"> <script src="//cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script><script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script><script>$('#table_id').DataTable({
pageLength: 15,
lengthMenu: [
[
15, 30, 35, -1
],
[
15, 30, 45
]
]
})</script><!-- build:js assets/vendor/js/core.js -->{# <script src="../assets/vendor/libs/jquery/jquery.js"></script> #}{# <script src="../assets/vendor/libs/popper/popper.js"></script> #}<script src="../assets/vendor/js/bootstrap.js"> </script><script src="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script><script src="../assets/vendor/js/menu.js"></script><!-- endbuild --><!-- Vendors JS --><script src="../assets/vendor/libs/apex-charts/apexcharts.js"></script><!-- Main JS --><script src="../assets/js/main.js"></script><script src="{{ asset('js/script5.js') }}"></script>{# <script src="{{ asset('js/jquery.min.js') }}"></script>
																																																																																																																																																																																																				             <script src="{{ asset('js/jquery.dataTables.min.js') }}"></script>
																																																														
																																																																																																																																																																																																			              <script src="{{ asset('js/jquery-3.5.1.js') }}"></script>
																																																																																																																																																																																																				              <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> #}<!-- Page JS --><script src="../assets/js/dashboards-analytics.js"></script><!-- Place this tag in your head or just before your close body tag. --><script async defer src="https://buttons.github.io/buttons.js"></script></body></html><script>$(document).ready(function () {
$("#site").on("change", function () {
var abreviationSite = $(this).val()
var dateDepart = $("#dateDepart").val()
var dateFin = $("#dateFin").val()

$.ajax({
type: "POST",
url: "{{ path('filter_facturation_') }}",

data: {
abreviationSite: abreviationSite,
dateDepart: dateDepart,
dateFin: dateFin
},
success: function (data) {
$("#listFactures").empty().append(data);
}

})

})

$("body #dateFin").keypress(function (e) {

var key = e.which;
if (key == 13) {

var abreviationSite = $("#abreviationSite").val()
var dateDepart = $("#dateDepart").val()
var dateFin = $(this).val()

$.ajax({
type: "POST",
url: "{{ path('filter_facturation_') }}",

data: {
abreviationSite: abreviationSite,
dateDepart: dateDepart,
dateFin: dateFin
},
success: function (data) {
$("#listFactures").empty().append(data);
}


})
}
})

})</script> {% endblock %}
